# 什么是侧链
## 1.1 基本概念

侧链的概念是相对于主链而言的。当主链的性能出现瓶颈，或者某些功能无法扩展的时候，把交易和资产转移到侧链上，从而分担主链的压力，扩展主链的的性能和功能。

早期侧链技术方案主要是针对比特币提出的。因为根据比特币的技术架构，天生就有扩展性的不足。比如交易延时长、吞吐量低、不支持图灵完备的智能合约，都是比特币内在的设计缺陷。这些设计缺陷必须通过重构比特币基础框架和算法才能解决。
但是同时比特币也是市值最大、流通性最高、认可度最广的数字货币，所以修改比特币基础架构对市场的影响很大，风险也比较高。比特币核心开发者在技术升级的态度上比较保守，这也决定了比特币通过技术升级提高可扩展性很难实现。

侧链技术的基本想法是绕过比特币技术升级的路线，另外启动一条侧链，将比特币资产转移到侧链上。反之也可以将侧链上的资产转回到比特币。类似于布雷顿森林体系，每一盎司黄金对应35美元，美元和黄金可以按照这个比例互换。比特币在主链和侧链上的资产双向转移，这个过程称之为资产的双向锚定(2WP)。通过资产在比特币和侧链两个区块链之间相互转换，可以加速比特币的流动性。侧链上的资产有比特币的信用背书，在价值上等同于比特币。同时侧链的设计架构不受比特币网络的限制，开发者可以通过各种各样的区块链技术构建侧链，应用于各种应用场景。所以侧链技术是间接的扩展了比特币的性能和功能。

## 1.2 双向锚定(2WP)

双向锚定(2-Way-Peg)是侧链的核心功能。它允许将比特币从主链转移到侧链，反之也可以从侧链转回到比特币主链。因为比特币无法被销毁，也无法被创造(除了挖矿之外)，比特币的“转移”实际上是通过资产锁定间接实现的。
当转移1个比特币到侧链的时候，这1个比特币被发送到一个特殊的锁定地址，侧链验证这笔锁定交易后，铸造相同数量的等价token。反之，当侧链上等量的token转移回比特币的时候，在测链上销毁token，原先锁定的比特币就会被解锁。

任何一个双向锚定系统的技术方案，都要保证主链和侧链上的资产是平衡的。规避作弊导致的资产双花或者丢失。
这涉及到分析参与方作弊的成本与收益，和攻击因果关系，在此基础上设计一套密码学协议和激励体制，保证资产双向锚定的安全性。


# 什么是跨链

自从比特币上线以来，诞生了无数条不同的区块链。这些区块链上的资产彼此无法互联互通，token只能在同一个链之内转账，但是不能跨区块链转账，不可避免的形成了价值孤岛效应。

传统的跨链交易是通过交易所完成的，用户可以在交易所里，后来随着数字货币的种类越来越多，很多交易所也开始进行不同类型数字货币之间的兑换。交易所开展的不同类型数字货币之间的兑换，就是一种跨链价值转移的实现。严格来说，币币交易所就是一个跨链技术的实现。

区块链是分布式总账的一种。一条区块链就是一个独立的账本，两条不同的链，就是两个不同的独立的账本，两个账本没有关联。本质上价值没有办法在账本间转移，但是对于具体的某个用户，用户在一条区块链上存储的价值，能够变成另一条链上的价值，这就是价值的流通。

# 侧链与跨链

侧链技术最早是blockstream提出的，目的是通过2WP技术将比特币转移到另一个新链上，一般侧链服务于主链。
后来随着

早期的开源侧链项目比如 blockstream 的元素链，使用的比特币双向挂钩技术，它是跨链的雏形。到后来的 BTC-Relay(一种基于以太坊区块链的智能合约)，是通过跨链将比特币和以太坊连接起来的技术。

早期的项目主要关注资产的转移，而如今的跨链项目则更多关注链状态的转移，这就形成了各个跨链的技术今天的格局。一般 的侧链服务于主链，而跨链志在链之间价值和功能的连通，可以说，侧链与跨链，在技术内容上大体相似，只在谈到他们所服务的对象时才需要做细致的区分。

相对而言侧链技术比跨链更早的提出来，后期随着区块链项目
这两个概念比较容易混淆，他们既有相似的地方，也有差异。
相同点包括:

- 两个或者多个区块链之间的互联互通协议
- 资产可以在不同的链之间转移

侧链与跨链的差异主要体现在:

| | 侧链 | 跨链 |
| --- | --- | --- |
| 设计目的 | 扩展主链的性能和功能 | 资产跨链交易 |
| 链间关系 | 从属关系 | 对等关系 |
| 资产兑换 | 固定兑换比率 | 可变兑换比率 |
| 是否锁定资产 | 需要 | 不需要 |

## 侧链跨链
为了解决公有链的低吞吐量带来的高手续费、网络拥塞等诸多问题，很多团队都很有预见性的提出了相应的优化方案。从现有技术实现的角度来说，基本分为三种，分别是侧链，分片和 DAG。





# 关键技术难题和解决方案

## 链间通信问题
1. 多边协议互通(跨链特有)
	- 中心式中继链
2. 交易验证
	- 公证人机制
	- 区块头Oracle + SPV

## 链间事务问题
1. 交易最终性
	- 多区块确认
	- 区块纠缠（联合挖矿）
	- 放弃POW，改用 BFT/DPOS/POS 等能快速完成finality的共识算法

2. 交易的原子性
	- 哈希时间锁，原子交换协议

## 链间资产问题
1. 2WP锁定资产问题(侧链特有)
	- 单一托管
	- 分布式私钥管理
	- 公证人联盟

2. 交易对手问题
	- 撮合交易


# 项目案例分析

## 侧链项目案例

### BTCRelay
### RSK
### Lisk
### Lighting Network

|  | BTCRelay | RSK | Lisk | 
| --- | --- | --- | --- | --- |
| 交易验证 | 区块头预言机 + SPV | 区块头预言机 + SPV | ? |
| 交易最终性| 等待足够多确认 | 多区块确认 | DPOS |
| 交易原子性 | - | 哈希时间锁 | ? |
| 锁定资产问题 | - | 公证人联盟 | ? |


## 跨链项目案例

### Ripple
### WanChain
### Polkadot
### OKLink
### Cosmos

|           | Ripple | Polkadot | Cosmos | WanChain | OKLink |
| ---------- | --- | --- | --- | --- | --- | --- |
| 多边协议互通 | IDL（SWIFT）|  |  | | |
| 交易验证    | 公证人 |  |  | | |
| 交易最终性  | ? |  |  | | |
| 交易原子性  | 哈希时间锁 |  |  |  |  |
| 交易对手问题 | 撮合交易 |  |  | | |

# 投资逻辑







